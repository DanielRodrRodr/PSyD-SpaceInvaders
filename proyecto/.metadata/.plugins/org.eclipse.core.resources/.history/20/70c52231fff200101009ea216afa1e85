#include <lcd.h>
#include "config.h"
#include "lives.h"

static void lives_draw( Lives *self );

void lives_init( Lives *self )
{
    self->value = MAX_LIFES;
    // Configura posicion. FONT_WIDTH*2 indica que ya pensaban en doble ancho.
    // Usaremos coord directas para el texto.
    self->col   = (31+7)*FONT_WIDTH*2;
    self->row   = 0;
    lives_draw( self );
}

static void lives_draw( Lives *self )
{
    // Usamos la versión x2 para que coincida con el tamaño de los sprites
    // Pasamos el valor entero.
    lcd_putint_x2( self->col, self->row, WHITE, self->value );
}

void lives_launch( Lives *self )
{
    lives_draw( self );
}

void lives_update( Lives *self )
{  
    self->value--;
    if( self->value < 0 )
    {
        self->value = 0;
    }
    lives_draw( self );
}
